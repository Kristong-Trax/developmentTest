[34m2018-05-17 11:31:17,126 - rbus-sand calculations - 26594 - INFO - {"message": "Log is saved to /home/yoava/dev/trax_ace_factory/Projects/RBUS/log.txt", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "e4f45c9", "process": "10.0.0.87:", "platform": "python", "severity": "INFO", "version": "unknown", "size": 280}[0m
[34m2018-05-17 11:31:18,179 - rbus-sand calculations - 26594 - INFO - {"message": "Log initialized with Syslog handler. Running on linux2 ", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "5a0218e", "process": "10.0.0.87:", "platform": "python", "severity": "INFO", "version": "unknown", "size": 265}[0m
[34m2018-05-17 11:31:18,182 - rbus-sand calculations - 26594 - INFO - {"message": "Log level set to \"INFO\"", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "cc39983", "process": "10.0.0.87:", "platform": "python", "severity": "INFO", "version": "unknown", "size": 235}[0m
[34m2018-05-17 11:31:18,185 - rbus-sand calculations - 26594 - INFO - {"message": "Environment set to \"Prod\"", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "1df03e0", "process": "10.0.0.87:", "platform": "python", "severity": "INFO", "version": "unknown", "size": 237}[0m
[34m2018-05-17 11:31:18,189 - rbus-sand calculations - 26594 - INFO - {"message": "Process PID is 26594", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "fff274d", "process": "10.0.0.87:", "platform": "python", "severity": "INFO", "version": "unknown", "size": 230}[0m
[34m2018-05-17 11:31:18,422 - rbus-sand calculations - 26594 - INFO - {"message": "Projects data is empty, loading data into memory cache...", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "e08ec6a", "process": "10.0.0.87:", "platform": "python", "severity": "INFO", "version": "unknown", "size": 267}[0m
[34m2018-05-17 11:31:19,381 - rbus-sand calculations - 26594 - INFO - {"message": "get_credentials: get request returned errors: [u'entry for role yoava@TraxRetail.com not found']", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "fc56a0b", "process": "10.0.0.87:", "platform": "python", "severity": "INFO", "version": "unknown", "size": 306}[0m
[34m2018-05-17 11:31:20,312 - rbus-sand calculations - 26594 - INFO - {"message": "get_credentials: get request returned errors: [u'entry for role yoava@TraxRetail.com not found']", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "fc56a0b", "process": "10.0.0.87:", "platform": "python", "severity": "INFO", "version": "unknown", "size": 306}[0m
[43m[30m2018-05-17 11:31:20,316 - rbus-sand calculations - 26594 - WARNING - {"message": "get_credentials: Failed to retrieve credentials from vault: exception is :Login to vault failed 1 tiems. last login resulted errors: [u'entry for role yoava@TraxRetail.com not found']", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "92a0ca6", "process": "10.0.0.87:", "platform": "python", "severity": "WARNING", "version": "unknown", "size": 393}[0m
[43m[30m2018-05-17 11:31:20,321 - rbus-sand calculations - 26594 - WARNING - {"message": "Traceback (most recent call last):\n  File \"/home/yoava/dev/theGarage/Trax/Cloud/Services/Connector/Factory.py\", line 87, in get_credentials\n    token = cls.cloud_adapter.get_vault_token(force)\n  File \"/home/yoava/dev/theGarage/Trax/Cloud/Services/Connector/ConnectorAdapter.py\", line 92, in get_vault_token\n    self._login_vault_request()\n  File \"/home/yoava/dev/theGarage/Trax/Cloud/Services/Connector/ConnectorAdapter.py\", line 68, in _login_vault_request\n    self._check_for_errors(result, retries)\n  File \"/home/yoava/dev/theGarage/Trax/Cloud/Services/Connector/ConnectorAdapter.py\", line 82, in _check_for_errors\n    return self._login_vault_request(retries - 1)\n  File \"/home/yoava/dev/theGarage/Trax/Cloud/Services/Connector/ConnectorAdapter.py\", line 68, in _login_vault_request\n    self._check_for_errors(result, retries)\n  File \"/home/yoava/dev/theGarage/Trax/Cloud/Services/Connector/ConnectorAdapter.py\", line 83, in _check_for_errors\n    raise Exception(VaultRequest.LOGIN_FAILED_ERR.format(VaultResource.RETRY_AMOUNT, errors))\nException: Login to vault failed 1 tiems. last login resulted errors: [u'entry for role yoava@TraxRetail.com not found']\n", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "a2d05a8", "process": "10.0.0.87:", "platform": "python", "severity": "WARNING", "version": "unknown", "size": 1398}[0m
[34m2018-05-17 11:31:26,509 - rbus-sand calculations - 26594 - INFO - {"message": "Loaded projects data into memory cache", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "07865dd", "process": "10.0.0.87:", "platform": "python", "severity": "INFO", "version": "unknown", "size": 248}[0m
[34m2018-05-17 11:31:27,394 - rbus-sand calculations - 26594 - INFO - {"message": "get_credentials: get request returned errors: [u'entry for role yoava@TraxRetail.com not found']", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "fc56a0b", "process": "10.0.0.87:", "platform": "python", "severity": "INFO", "version": "unknown", "size": 306}[0m
[34m2018-05-17 11:31:28,316 - rbus-sand calculations - 26594 - INFO - {"message": "get_credentials: get request returned errors: [u'entry for role yoava@TraxRetail.com not found']", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "fc56a0b", "process": "10.0.0.87:", "platform": "python", "severity": "INFO", "version": "unknown", "size": 306}[0m
[43m[30m2018-05-17 11:31:28,322 - rbus-sand calculations - 26594 - WARNING - {"message": "get_credentials: Failed to retrieve credentials from vault: exception is :Login to vault failed 1 tiems. last login resulted errors: [u'entry for role yoava@TraxRetail.com not found']", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "92a0ca6", "process": "10.0.0.87:", "platform": "python", "severity": "WARNING", "version": "unknown", "size": 393}[0m
[43m[30m2018-05-17 11:31:28,325 - rbus-sand calculations - 26594 - WARNING - {"message": "Traceback (most recent call last):\n  File \"/home/yoava/dev/theGarage/Trax/Cloud/Services/Connector/Factory.py\", line 87, in get_credentials\n    token = cls.cloud_adapter.get_vault_token(force)\n  File \"/home/yoava/dev/theGarage/Trax/Cloud/Services/Connector/ConnectorAdapter.py\", line 92, in get_vault_token\n    self._login_vault_request()\n  File \"/home/yoava/dev/theGarage/Trax/Cloud/Services/Connector/ConnectorAdapter.py\", line 68, in _login_vault_request\n    self._check_for_errors(result, retries)\n  File \"/home/yoava/dev/theGarage/Trax/Cloud/Services/Connector/ConnectorAdapter.py\", line 82, in _check_for_errors\n    return self._login_vault_request(retries - 1)\n  File \"/home/yoava/dev/theGarage/Trax/Cloud/Services/Connector/ConnectorAdapter.py\", line 68, in _login_vault_request\n    self._check_for_errors(result, retries)\n  File \"/home/yoava/dev/theGarage/Trax/Cloud/Services/Connector/ConnectorAdapter.py\", line 83, in _check_for_errors\n    raise Exception(VaultRequest.LOGIN_FAILED_ERR.format(VaultResource.RETRY_AMOUNT, errors))\nException: Login to vault failed 1 tiems. last login resulted errors: [u'entry for role yoava@TraxRetail.com not found']\n", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "a2d05a8", "process": "10.0.0.87:", "platform": "python", "severity": "WARNING", "version": "unknown", "size": 1398}[0m
[34m2018-05-17 11:31:30,928 - rbus-sand calculations - 26594 - INFO - {"message": "get_credentials: get request returned errors: [u'entry for role yoava@TraxRetail.com not found']", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "fc56a0b", "process": "10.0.0.87:", "platform": "python", "severity": "INFO", "version": "unknown", "size": 306}[0m
[34m2018-05-17 11:31:31,851 - rbus-sand calculations - 26594 - INFO - {"message": "get_credentials: get request returned errors: [u'entry for role yoava@TraxRetail.com not found']", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "fc56a0b", "process": "10.0.0.87:", "platform": "python", "severity": "INFO", "version": "unknown", "size": 306}[0m
[43m[30m2018-05-17 11:31:31,855 - rbus-sand calculations - 26594 - WARNING - {"message": "get_credentials: Failed to retrieve credentials from vault: exception is :Login to vault failed 1 tiems. last login resulted errors: [u'entry for role yoava@TraxRetail.com not found']", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "92a0ca6", "process": "10.0.0.87:", "platform": "python", "severity": "WARNING", "version": "unknown", "size": 393}[0m
[43m[30m2018-05-17 11:31:31,859 - rbus-sand calculations - 26594 - WARNING - {"message": "Traceback (most recent call last):\n  File \"/home/yoava/dev/theGarage/Trax/Cloud/Services/Connector/Factory.py\", line 87, in get_credentials\n    token = cls.cloud_adapter.get_vault_token(force)\n  File \"/home/yoava/dev/theGarage/Trax/Cloud/Services/Connector/ConnectorAdapter.py\", line 92, in get_vault_token\n    self._login_vault_request()\n  File \"/home/yoava/dev/theGarage/Trax/Cloud/Services/Connector/ConnectorAdapter.py\", line 68, in _login_vault_request\n    self._check_for_errors(result, retries)\n  File \"/home/yoava/dev/theGarage/Trax/Cloud/Services/Connector/ConnectorAdapter.py\", line 82, in _check_for_errors\n    return self._login_vault_request(retries - 1)\n  File \"/home/yoava/dev/theGarage/Trax/Cloud/Services/Connector/ConnectorAdapter.py\", line 68, in _login_vault_request\n    self._check_for_errors(result, retries)\n  File \"/home/yoava/dev/theGarage/Trax/Cloud/Services/Connector/ConnectorAdapter.py\", line 83, in _check_for_errors\n    raise Exception(VaultRequest.LOGIN_FAILED_ERR.format(VaultResource.RETRY_AMOUNT, errors))\nException: Login to vault failed 1 tiems. last login resulted errors: [u'entry for role yoava@TraxRetail.com not found']\n", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "a2d05a8", "process": "10.0.0.87:", "platform": "python", "severity": "WARNING", "version": "unknown", "size": 1398}[0m
[34m2018-05-17 11:31:38,217 - rbus-sand calculations - 26594 - INFO - {"message": "Initialize the data_provider with session data", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "session_uid": "b6ce555b-763d-404a-b1d7-b514f3bb9bae", "duration": 2.536, "project_name": "rbus-sand", "id": "bee85bd", "process": "10.0.0.87:", "platform": "python", "severity": "INFO", "version": "unknown", "size": 359}[0m
[45m[1m[30m2018-05-17 11:31:42,792 - rbus-sand calculations - 26594 - CRITICAL - {"message": "Unhandled exception hook caught", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "bebeb82", "process": "10.0.0.87:", "platform": "python", "severity": "CRITICAL", "version": "unknown", "size": 241}
Traceback (most recent call last):
  File "/home/yoava/dev/trax_ace_factory/Projects/RBUS/Calculations.py", line 26, in <module>
    data_provider.load_session_data(session)
  File "/home/yoava/dev/theGarage/Trax/Algo/Calculations/Core/DataProvider.py", line 244, in load_session_data
    self._init_static_data()
  File "/home/yoava/dev/theGarage/Trax/Algo/Calculations/Core/DataProvider.py", line 426, in _init_static_data
    self._data[Data.VISIT_DATE], self.timer)
  File "/home/yoava/dev/theGarage/Trax/Algo/Calculations/Core/StaticProvider.py", line 107, in init_data
    static_gateway.get_all_excluded_products()
  File "/home/yoava/dev/theGarage/Trax/Algo/Calculations/Core/AceOrmDBGateway.py", line 1021, in get_all_excluded_products
    return self.perform_query(query_excluded_templates), \
  File "/home/yoava/dev/theGarage/Trax/Algo/Calculations/Core/AceOrmDBGateway.py", line 348, in perform_query
    query_results = self._session.execute(query.replace('\n', ''), kwargs)
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/sqlalchemy/orm/session.py", line 1176, in execute
    bind, close_with_result=True).execute(clause, params or {})
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/sqlalchemy/orm/session.py", line 1042, in _connection_for_bind
    conn = engine.contextual_connect(**kw)
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/sqlalchemy/engine/base.py", line 2123, in contextual_connect
    self._wrap_pool_connect(self.pool.connect, None),
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/sqlalchemy/engine/base.py", line 2158, in _wrap_pool_connect
    return fn()
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/sqlalchemy/pool.py", line 403, in connect
    return _ConnectionFairy._checkout(self)
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/sqlalchemy/pool.py", line 782, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/sqlalchemy/pool.py", line 532, in checkout
    rec = pool._do_get()
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/sqlalchemy/pool.py", line 1277, in _do_get
    return self._create_connection()
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/sqlalchemy/pool.py", line 350, in _create_connection
    return _ConnectionRecord(self)
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/sqlalchemy/pool.py", line 477, in __init__
    self.__connect(first_connect_check=True)
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/sqlalchemy/pool.py", line 667, in __connect
    connection = pool._invoke_creator(self)
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/sqlalchemy/engine/strategies.py", line 105, in connect
    return dialect.connect(*cargs, **cparams)
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/sqlalchemy/engine/default.py", line 410, in connect
    return self.dbapi.connect(*cargs, **cparams)
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/MySQLdb/__init__.py", line 81, in Connect
    return Connection(*args, **kwargs)
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/MySQLdb/connections.py", line 193, in __init__
    super(Connection, self).__init__(*args, **kwargs2)
KeyboardInterrupt[0m
[43m[30m2018-05-17 11:31:42,876 - rbus-sand calculations - 26594 - WARNING - {"message": "Destructor disconnected from project rbus-sand since connection was not closed properly", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "73e97dd", "process": "10.0.0.87:", "platform": "python", "severity": "WARNING", "version": "unknown", "size": 297}[0m
[34m2018-05-17 11:31:58,572 - rbus-sand calculations - 26675 - INFO - {"message": "Log is saved to /home/yoava/dev/trax_ace_factory/Projects/RBUS/log.txt", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "e4f45c9", "process": "10.0.0.87:", "platform": "python", "severity": "INFO", "version": "unknown", "size": 280}[0m
[34m2018-05-17 11:31:59,628 - rbus-sand calculations - 26675 - INFO - {"message": "Log initialized with Syslog handler. Running on linux2 ", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "5a0218e", "process": "10.0.0.87:", "platform": "python", "severity": "INFO", "version": "unknown", "size": 265}[0m
[34m2018-05-17 11:31:59,631 - rbus-sand calculations - 26675 - INFO - {"message": "Log level set to \"INFO\"", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "cc39983", "process": "10.0.0.87:", "platform": "python", "severity": "INFO", "version": "unknown", "size": 235}[0m
[34m2018-05-17 11:31:59,635 - rbus-sand calculations - 26675 - INFO - {"message": "Environment set to \"Prod\"", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "1df03e0", "process": "10.0.0.87:", "platform": "python", "severity": "INFO", "version": "unknown", "size": 237}[0m
[34m2018-05-17 11:31:59,637 - rbus-sand calculations - 26675 - INFO - {"message": "Process PID is 26675", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "fff274d", "process": "10.0.0.87:", "platform": "python", "severity": "INFO", "version": "unknown", "size": 230}[0m
[34m2018-05-17 11:31:59,854 - rbus-sand calculations - 26675 - INFO - {"message": "Projects data is empty, loading data into memory cache...", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "e08ec6a", "process": "10.0.0.87:", "platform": "python", "severity": "INFO", "version": "unknown", "size": 267}[0m
[45m[1m[30m2018-05-17 11:32:00,128 - rbus-sand calculations - 26675 - CRITICAL - {"message": "Unhandled exception hook caught", "environment": "PROD", "application": "rbus-sand calculations", "cloud": "AWS", "id": "c46ec49", "process": "10.0.0.87:", "platform": "python", "severity": "CRITICAL", "version": "unknown", "size": 241}
Traceback (most recent call last):
  File "/home/yoava/dev/trax_ace_factory/Projects/RBUS/Calculations.py", line 23, in <module>
    data_provider = KEngineDataProvider(project_name)
  File "/home/yoava/dev/theGarage/Trax/Algo/Calculations/Core/DataProvider.py", line 152, in __init__
    self.orm_session = orm_session if orm_session is not None else OrmSession(project_name, writable=True)
  File "/home/yoava/dev/theGarage/Trax/Data/Orm/OrmCore.py", line 27, in __init__
    self.session = ProjectsSessions.get_session(project_name, writable, autocommit)
  File "/home/yoava/dev/theGarage/Trax/Data/Orm/OrmCore.py", line 53, in get_session
    cls.sessions.__setattr__(key_name, InnerOrmSession(project_name, writable, autocommit))
  File "/home/yoava/dev/theGarage/Trax/Data/Orm/OrmCore.py", line 72, in __init__
    project_instances = ProjectStore.get_project(project_name)
  File "/home/yoava/dev/theGarage/Trax/Data/Projects/Store.py", line 322, in get_project
    cls._check_invalidation_condition(use_cache)
  File "/home/yoava/dev/theGarage/Trax/Data/Projects/Store.py", line 99, in _check_invalidation_condition
    cls._load_data()
  File "/home/yoava/dev/theGarage/Trax/Data/Projects/Store.py", line 54, in _load_data
    conn = MongoConnector(MongoConnector.SMART, use_vault=True)
  File "/home/yoava/dev/theGarage/Trax/Mongo/Connector.py", line 319, in __init__
    self._get_credentials()
  File "/home/yoava/dev/theGarage/Trax/Mongo/Connector.py", line 372, in _get_credentials
    self._update_credentials_from_vault()
  File "/home/yoava/dev/theGarage/Trax/Mongo/Connector.py", line 421, in _update_credentials_from_vault
    user = ResourceUsers.get_user_credentials(resource_field)
  File "/home/yoava/dev/theGarage/Trax/Cloud/Services/Connector/Keys.py", line 409, in get_user_credentials
    cred = CredentialsFactory.get_credentials(resource, vault_cred_url=vault_cred_url)
  File "/home/yoava/dev/theGarage/Trax/Cloud/Services/Connector/Factory.py", line 87, in get_credentials
    token = cls.cloud_adapter.get_vault_token(force)
  File "/home/yoava/dev/theGarage/Trax/Cloud/Services/Connector/ConnectorAdapter.py", line 92, in get_vault_token
    self._login_vault_request()
  File "/home/yoava/dev/theGarage/Trax/Cloud/Services/Connector/ConnectorAdapter.py", line 67, in _login_vault_request
    result = json.loads(requests.post(url=self.login_vault_url, data=data, timeout=VAULT_TOKEN_REQUEST_TIMEOUT).text)
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/requests/api.py", line 112, in post
    return request('post', url, data=data, json=json, **kwargs)
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/requests/api.py", line 58, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/requests/sessions.py", line 502, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/requests/sessions.py", line 612, in send
    r = adapter.send(request, **kwargs)
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/requests/adapters.py", line 440, in send
    timeout=timeout
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/urllib3/connectionpool.py", line 600, in urlopen
    chunked=chunked)
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/urllib3/connectionpool.py", line 345, in _make_request
    self._validate_conn(conn)
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/urllib3/connectionpool.py", line 844, in _validate_conn
    conn.connect()
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/urllib3/connection.py", line 284, in connect
    conn = self._new_conn()
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/urllib3/connection.py", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File "/home/yoava/miniconda/envs/garage/lib/python2.7/site-packages/urllib3/util/connection.py", line 60, in create_connection
    for res in socket.getaddrinfo(host, port, family, socket.SOCK_STREAM):
KeyboardInterrupt[0m
